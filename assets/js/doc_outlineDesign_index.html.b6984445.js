"use strict";(self.webpackChunkauth_genie=self.webpackChunkauth_genie||[]).push([[9720],{4789(a,e,s){s.r(e),s.d(e,{comp:()=>t,data:()=>l});var n=s(641);const i={},t=(0,s(6262).A)(i,[["render",function(a,e){return(0,n.uX)(),(0,n.CE)("div",null,[...e[0]||(e[0]=[(0,n.Fv)('<h2 id="一、引言" tabindex="-1"><a class="header-anchor" href="#一、引言"><span>一、引言</span></a></h2><h3 id="_1-1-编写目的" tabindex="-1"><a class="header-anchor" href="#_1-1-编写目的"><span>1.1 编写目的</span></a></h3><p>给出 AuthGenie（灵域）系统的总体设计、模块划分与接口要点，作为研发与协作的统一参考。</p><h3 id="_1-2-项目背景" tabindex="-1"><a class="header-anchor" href="#_1-2-项目背景"><span>1.2 项目背景</span></a></h3><p>本系统为面向多平台软件授权管理与数据分析的 SaaS 平台，基于 Cloudflare Workers 构建，提供官网门户、角色化 Dashboard、统一授权验证接口与数据统计能力。</p><h3 id="_1-3-术语" tabindex="-1"><a class="header-anchor" href="#_1-3-术语"><span>1.3 术语</span></a></h3><table><thead><tr><th>缩写/术语</th><th>解释</th></tr></thead><tbody><tr><td>Cloudflare Workers</td><td>Serverless 运行环境</td></tr><tr><td>D1</td><td>关系型数据库</td></tr><tr><td>R2</td><td>对象存储</td></tr><tr><td>KV</td><td>键值存储</td></tr><tr><td>许可证</td><td>项目授权凭证</td></tr><tr><td>项目 ID</td><td>项目唯一标识</td></tr></tbody></table><h3 id="_1-4-参考资料" tabindex="-1"><a class="header-anchor" href="#_1-4-参考资料"><span>1.4 参考资料</span></a></h3><ul><li><code>docs/doc/README.md</code></li></ul><h2 id="二、任务概述" tabindex="-1"><a class="header-anchor" href="#二、任务概述"><span>二、任务概述</span></a></h2><h3 id="_2-1-系统描述" tabindex="-1"><a class="header-anchor" href="#_2-1-系统描述"><span>2.1 系统描述</span></a></h3><p>系统按三类角色提供不同权限的管理与数据视图，支持团队/项目管理、许可证生成与验证、访问数据统计与日志审计。</p><h3 id="_2-2-运行环境" tabindex="-1"><a class="header-anchor" href="#_2-2-运行环境"><span>2.2 运行环境</span></a></h3><ul><li>运行平台：Cloudflare Workers。</li><li>存储：D1（结构化数据）、R2（对象资源）、KV（轻量配置/缓存）。</li><li>敏感信息：通过环境变量提供（超级管理员账号与密码等）。</li></ul><h3 id="_2-3-条件与限制" tabindex="-1"><a class="header-anchor" href="#_2-3-条件与限制"><span>2.3 条件与限制</span></a></h3><ul><li>系统管理员账号仅由系统超级管理员创建。</li><li>验证接口 <code>/api/vertify</code> 为统一授权入口。</li><li>所有关键操作需记录操作日志以备审计。</li></ul><h2 id="三、总体设计" tabindex="-1"><a class="header-anchor" href="#三、总体设计"><span>三、总体设计</span></a></h2><h3 id="_3-1-系统设计原则" tabindex="-1"><a class="header-anchor" href="#_3-1-系统设计原则"><span>3.1 系统设计原则</span></a></h3><ul><li>轻量化与 Serverless 优先。</li><li>权限边界清晰，角色分权。</li><li>接口统一，跨平台行为一致。</li><li>操作可追溯，日志完整。</li></ul><h3 id="_3-2-系统结构" tabindex="-1"><a class="header-anchor" href="#_3-2-系统结构"><span>3.2 系统结构</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>[官网门户/角色登录]</span></span>\n<span class="line"><span>        |</span></span>\n<span class="line"><span>        v</span></span>\n<span class="line"><span>[角色 Dashboard] &lt;-&gt; [Workers API / Hono]</span></span>\n<span class="line"><span>                               |</span></span>\n<span class="line"><span>               +---------------+---------------+</span></span>\n<span class="line"><span>               |                               |</span></span>\n<span class="line"><span>             [D1]                           [R2/KV]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-处理流程-概要" tabindex="-1"><a class="header-anchor" href="#_3-3-处理流程-概要"><span>3.3 处理流程（概要）</span></a></h3><ol><li>系统用户创建团队与项目，生成项目唯一 ID。</li><li>系统用户批量生成许可证并分发给客户端。</li><li>客户端调用 <code>/api/vertify</code> 进行授权校验。</li><li>后端记录校验日志并沉淀统计数据。</li></ol><h3 id="_3-4-模块划分" tabindex="-1"><a class="header-anchor" href="#_3-4-模块划分"><span>3.4 模块划分</span></a></h3><ul><li><strong>账户与角色模块</strong>：超级管理员/系统管理员/系统用户的身份与权限。</li><li><strong>团队模块</strong>：团队创建、成员加入、团队状态管理。</li><li><strong>项目模块</strong>：项目创建、状态管理、项目 ID 管理。</li><li><strong>许可证模块</strong>：批量生成、查询详情、验证记录。</li><li><strong>统计模块</strong>：按时间范围统计访问量、用户唯一标识、许可证编号。</li><li><strong>日志模块</strong>：管理员与用户操作日志。</li><li><strong>验证接口模块</strong>：统一授权校验入口。</li><li><strong>门户与 Dashboard</strong>：官网首页与角色化管理界面。</li></ul><h3 id="_3-5-功能需求与模块关系-简述" tabindex="-1"><a class="header-anchor" href="#_3-5-功能需求与模块关系-简述"><span>3.5 功能需求与模块关系（简述）</span></a></h3><ul><li>角色与权限 -&gt; 账户与角色模块 + 日志模块。</li><li>团队/项目管理 -&gt; 团队模块 + 项目模块。</li><li>许可证生成与验证 -&gt; 许可证模块 + 验证接口模块。</li><li>数据统计 -&gt; 统计模块。</li></ul><h3 id="_3-6-尚未解决的问题" tabindex="-1"><a class="header-anchor" href="#_3-6-尚未解决的问题"><span>3.6 尚未解决的问题</span></a></h3><ul><li>许可证规则扩展（如试用期、离线授权）仍需后续补充设计。</li></ul><h2 id="四、接口设计" tabindex="-1"><a class="header-anchor" href="#四、接口设计"><span>四、接口设计</span></a></h2><h3 id="_4-1-外部接口" tabindex="-1"><a class="header-anchor" href="#_4-1-外部接口"><span>4.1 外部接口</span></a></h3><ul><li><strong>授权验证</strong>：<code>POST /api/vertify</code>，JSON 请求体，包含客户端时间、系统凭证、许可证凭证、项目 ID；响应包含系统时间与验证结果。</li><li><strong>门户入口</strong>：官网首页提供三类角色登录入口与教程内容。</li></ul><h3 id="_4-2-内部接口" tabindex="-1"><a class="header-anchor" href="#_4-2-内部接口"><span>4.2 内部接口</span></a></h3><ul><li>许可证模块依赖项目模块的项目 ID 与归属关系。</li><li>统计模块依赖验证接口模块写入的校验日志。</li></ul><h2 id="五、数据结构设计-概要" tabindex="-1"><a class="header-anchor" href="#五、数据结构设计-概要"><span>五、数据结构设计（概要）</span></a></h2><h3 id="_5-1-主要实体" tabindex="-1"><a class="header-anchor" href="#_5-1-主要实体"><span>5.1 主要实体</span></a></h3><ul><li><strong>用户</strong>：系统用户基础信息、状态。</li><li><strong>管理员</strong>：系统管理员/超级管理员信息、状态。</li><li><strong>团队</strong>：名称、成员、状态。</li><li><strong>项目</strong>：名称、团队归属、项目 ID、状态。</li><li><strong>许可证</strong>：编号、绑定用户唯一标识、创建时间、首次使用、最后验证时间。</li><li><strong>日志</strong>：操作者、对象、时间、结果。</li></ul><h2 id="六、数据库设计-概要" tabindex="-1"><a class="header-anchor" href="#六、数据库设计-概要"><span>六、数据库设计（概要）</span></a></h2><ul><li><strong>D1</strong>：用户、管理员、团队、项目、许可证、日志等结构化数据。</li><li><strong>KV</strong>：轻量配置与缓存。</li><li><strong>R2</strong>：对象资源（如导出文件、媒体等）。</li></ul><h2 id="七、用户界面设计-概要" tabindex="-1"><a class="header-anchor" href="#七、用户界面设计-概要"><span>七、用户界面设计（概要）</span></a></h2><ul><li>官网首页：展示功能/教程，提供角色登录入口。</li><li>角色 Dashboard：按权限展示团队、项目、许可证、统计等功能。</li></ul><h2 id="八、出错处理设计-概要" tabindex="-1"><a class="header-anchor" href="#八、出错处理设计-概要"><span>八、出错处理设计（概要）</span></a></h2><ul><li><strong>认证/授权错误</strong>：提示无权限或凭证无效。</li><li><strong>资源不存在</strong>：提示项目/团队/许可证不存在。</li><li><strong>系统错误</strong>：提示服务不可用并记录日志。</li></ul>',43)])])}]]),l=JSON.parse('{"path":"/doc/outlineDesign/","title":"概要设计说明书","lang":"zh-CN","frontmatter":{"title":"概要设计说明书","icon":"famicons:cog-outline","createTime":"2026/01/13 00:20:08","permalink":"/doc/outlineDesign/","description":"一、引言 1.1 编写目的 给出 AuthGenie（灵域）系统的总体设计、模块划分与接口要点，作为研发与协作的统一参考。 1.2 项目背景 本系统为面向多平台软件授权管理与数据分析的 SaaS 平台，基于 Cloudflare Workers 构建，提供官网门户、角色化 Dashboard、统一授权验证接口与数据统计能力。 1.3 术语 1.4 参考...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"概要设计说明书\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-01T12:34:19.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://ag.529464.xyz/doc/outlineDesign/"}],["meta",{"property":"og:site_name","content":"灵域"}],["meta",{"property":"og:title","content":"概要设计说明书"}],["meta",{"property":"og:description","content":"一、引言 1.1 编写目的 给出 AuthGenie（灵域）系统的总体设计、模块划分与接口要点，作为研发与协作的统一参考。 1.2 项目背景 本系统为面向多平台软件授权管理与数据分析的 SaaS 平台，基于 Cloudflare Workers 构建，提供官网门户、角色化 Dashboard、统一授权验证接口与数据统计能力。 1.3 术语 1.4 参考..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-01T12:34:19.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-01T12:34:19.000Z"}]]},"readingTime":{"minutes":3.76,"words":1129},"git":{"createdTime":1769949259000,"updatedTime":1769949259000,"contributors":[{"name":"only9464","username":"only9464","email":"sky9464@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/only9464?v=4","url":"https://github.com/only9464"}],"changelog":[{"hash":"510286c9bd220b63b2886529a42d85ee105ee4e6","time":1769949259000,"email":"sky9464@qq.com","author":"only9464","message":"更新其他文档"}]},"autoDesc":true,"filePathRelative":"doc/outlineDesign.md","headers":[]}')}}]);