---
url: /doc/requirements/index.md
---
## 一、引言

### 1.1 目的

明确 AuthGenie（灵域）平台的业务范围、功能需求与非功能需求，作为产品、研发、测试与运维的统一依据。

### 1.2 背景

* 项目名称：AuthGenie（灵域）
* 项目定位：面向多平台软件（Windows/macOS/Linux/Android 等）的授权管理与数据分析 SaaS。
* 运行形态：基于 Cloudflare Workers 的服务端应用，提供官网门户与角色化 Dashboard。
* 存储体系：D1（关系型数据）、R2（对象存储）、KV（轻量配置/缓存）；敏感配置使用环境变量。
* 后端技术：Hono 作为 Web 框架，Drizzle ORM 作为数据库访问层。

### 1.3 术语

| 缩写/术语 | 解释 |
| --- | --- |
| Cloudflare Workers | Serverless 运行环境 |
| D1 | Cloudflare 关系型数据库 |
| R2 | Cloudflare 对象存储 |
| KV | Cloudflare 键值存储 |
| Hono | 轻量 Web 框架 |
| Drizzle ORM | TypeScript ORM |
| 许可证 | 项目授权凭证 |
| 项目 ID | 项目的唯一标识，用于授权验证 |

### 1.4 参考资料

* `docs/doc/README.md`

## 二、软件系统描述

### 2.1 软件介绍与范围

系统提供团队与项目管理、许可证生成与验证、项目访问统计等能力，并支持多角色分权管理。

**包含范围**：

* 官网门户与角色登录入口。
* 系统超级管理员/系统管理员/系统用户三类角色权限体系。
* 团队与项目管理。
* 许可证管理与统一验证接口。
* 项目数据统计与操作日志查看。

**不包含范围**：

* 客户端 SDK/授权库的具体实现。
* 线下销售与付款系统。
* 第三方授权系统迁移工具（如需另行规划）。

### 2.2 功能概述

* 角色与权限管理：按角色划分功能与访问权限。
* 团队与项目管理：创建、删除、启用/停用。
* 许可证管理：批量生成、详情查询、验证记录。
* 数据统计：按项目与时间范围展示访问数据。
* 统一验证接口：提供跨平台一致校验入口。
* 操作日志：管理员层级可审计用户操作。

## 三、软件功能性需求

### 3.1 角色与权限

* **系统超级管理员**
  * 管理系统管理员账号（创建/禁用/重置）。
  * 查看系统管理员操作日志。
* **系统管理员**
  * 管理系统用户账号（启用/停用）。
  * 管理系统用户创建的团队与项目（启用/停用/删除）。
  * 查看系统用户操作日志。
* **系统用户**
  * 创建/删除团队；加入他人团队。
  * 管理团队下的项目（创建/删除）。
  * 批量生成许可证；查看许可证详情。
  * 查看项目数据（访问量、用户唯一标识、许可证编号）。

### 3.2 团队与项目管理

* 团队作为协作单位，成员可共享团队下项目数据。
* 项目必须归属团队，生成唯一项目 ID。
* 项目支持启用/停用/删除（管理员可强制操作）。

### 3.3 许可证管理

* 支持批量生成许可证并绑定项目。
* 许可证详情包含：
  * 绑定的用户唯一标识
  * 创建时间
  * 第一次使用时间
  * 最后一次验证时间

### 3.4 数据与统计

* 支持按指定天数范围查询项目访问量。
* 支持查看访问相关用户唯一标识与许可证编号。

### 3.5 统一授权验证接口

* **接口**：`POST /api/vertify`，JSON 请求体。
* **请求包含**：
  * 客户端时间
  * 系统凭证
  * 许可证凭证
  * 项目 ID
* **响应包含**：
  * 系统时间
  * 验证结果（是否通过）

### 3.6 门户与 Dashboard

* 官网首页提供功能介绍、教程与角色入口。
* 每类角色拥有专属 Dashboard 与功能菜单。

## 四、非功能性需求

### 4.1 用户界面需求

* Web 端界面，按角色显示不同功能与数据。
* 首页强调功能入口与教程信息。

### 4.2 性能与可用性

* 验证接口应支持高并发请求，优先保证响应及时性。
* 核心数据与日志应可追溯、可审计。

### 4.3 安全与合规

* 超级管理员账号与敏感配置通过环境变量管理。
* 角色权限隔离，管理员不可越权访问用户数据。
* 验证接口需校验系统凭证与许可证凭证。

### 4.4 软/硬件环境需求

* Cloudflare Workers 运行环境。
* D1、R2、KV 作为存储基础。
* 后端采用 Hono + Drizzle ORM。
